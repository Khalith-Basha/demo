{"name":"Luna","body":"Luna\r\n=========\r\n\r\nIf you want to have something like github but on your own server (and you have no 5000$) you can use this application.\r\n\r\nWhat it can\r\n==================\r\n\r\n + Manage users. User registration, collaborators on repos\r\n + Manage ssh public keys. You can add any number of keys for yourself or only for one repo\r\n + Repositories. Can be public or private. You can add collaborator to repository.\r\n + Forking. You can fork any visible for you repository and make pull requests for owner\r\n + Ssh read+write access, http read+write access (use HTTPS!!!), git protocol read access\r\n + Mail notification about push (in practice it is not difficult to add other)\r\n\r\nInstallation\r\n====================\r\n\r\nAssume you already have a server with any java web server (i use jetty) and mongodb 2.0 (yes as storage it uses mongo). \r\n\r\nThe easiest way\r\n\r\n``` bash\r\n$ git clone git://github.com/btd/luna.git\r\n$ cd luna\r\n$ ./sbt package\r\n```\r\n\r\nNow use `./target/scala-2.9.1.final/luna-tool_2.9.1-{VERSION}.war`. Default settings help you to start an app. \r\n\r\nConfiguration\r\n======================\r\n\r\nAll configuration are optional. If one setting depends from others it will be written. \r\n*Next `/` in filepath means root of war package. `web.xml` means `/WEB-INF/web.xml`. and `props` means `/WEB-INF/classes/props/default.props`*.\r\n\r\n*Check that props file uses ASCII encoding*\r\n\r\nUser Registration\r\n---------------------\r\n\r\nProps:\r\n\r\n`users.registration.enabled` (`true`) - enable or disable user registration.\r\n\r\nAt first time luna check existence of user admin/admin, therefor dont forget to change password for him. If you remove all admins with `users.registration.enabled=false` one will be created =).\r\n\r\nLift\r\n----------------\r\n\r\nProps:\r\n\r\n`run.mode` (`development`) - set it to production.\r\n\r\nSession timeout\r\n----------------------\r\n\r\nTo change default session timeout you need to add to (or change) web.xml:\r\n\r\n``` xml\r\n<session-config>\r\n\t<session-timeout>!!!time in minutes!!!</session-timeout>\r\n</session-config>\r\n```\r\n\r\nMongoDB\r\n-------------------------\r\n\r\nIn development i use version 2.0, but at 1.8 it works too.\r\n\r\nProps settings:\r\n\r\n`db.host` (`localhost`) - hostname of server where mongo located;\r\n\r\n`dp.port` (`27017`) - port where mongo listen connections;\r\n\r\n`db.name` (`grt`) - database name;\r\n\r\n`db.user` - user for `db.name`. Depends on `db.password`;\r\n\r\n`db.password` - password of `db.user`. Depends on `db.user`.\r\n\r\n\r\nStored paths\r\n--------------------------\r\n\r\nThis is path in host fs where luna store own things.\r\n\r\nProps settings:\r\n\r\n`repository.dir` (`./repo/`) - where is user repositories is located. Make sure that this ends with `/`.\r\n\r\nGit transport\r\n---------------------------\r\n\r\nSettings for luna supported transports:\r\n\r\n`daemon.sshd.cert.path` (`./`) - where is sshd store it keys. Make sure that this ends with `/`.\r\n\r\n`daemon.sshd.port` (`22`) - sshd port\r\n\r\n`daemon.gitd.port` (`9418`) - gitd port\r\n\r\nFor http transport it uses web server port. If you want to use http make sure use HTTPS.\r\n\r\nNotification\r\n---------------------------\r\n\r\nFor mail notifications luna uses additional services.\r\n\r\n`notification.url` - this is where luna-services listen connections. E.g. `http://localhost:8081/luna/services`\r\n\r\nFor notification service need to install other web app (*luna-services*). And you must have SMTP server.\r\nIn `luna-services/WEB-INF/applicationContext.xml` see 2 places:\r\n\r\n``` xml\r\n<route>\r\n    <from uri=\"jetty:http://0.0.0.0:8081/luna/services/push\"/>\r\n    <unmarshal ref=\"gsonPushDataFormat\"/>\r\n    <bean ref=\"recipientListBean\"/>\r\n    <to uri=\"seda:pushEvents\"/>\r\n</route>\r\n```\r\n\r\nYou need to set `uri` attr of `from` tag to be relevant that use set for `notification.url`.\r\n\r\nSecond is a email settings for gmail. You can do this for your own smtp.\r\n\r\n``` xml\r\n<route>\r\n    <from uri=\"seda:emailOutput\"/>\r\n    <to uri=\"smtp:smtp.gmail.com:587?password=PASSWORD&amp;username=USERNAME&amp;mail.smtp.starttls.enable=true&amp;mail.smtp.auth=true&amp;mapMailMessage=false\"/>\r\n</route>\r\n```\r\n\r\nFs repo deleter\r\n--------------------------\r\n\r\nThis daemon delete repositories one time at day from filesystem of server.\r\n\r\nIt store trigger settings in `/WEB-INF/classes/quartz/job.xml`.\r\n\r\n``` xml\r\n<repeat-interval>There is time in millis</repeat-interval>\r\n```\r\n\r\nOS FAQ\r\n=================================\r\n\r\nLuna tested on windows and linux. There are my recomendations:\r\n\r\nWindows:\r\n\r\n * Dont use in user repos not ASCII filenames (i mean local characters) will be a crash\r\n * Install Mongo and Jetty as windows services\r\n\r\nLinux (for jetty):\r\n\r\n * If u use jetty dont use in repos (it is very outdated). Use 7 or 8. Install it by hands, add as daemon.\r\n * If you want to use port numbers < 1024. Read this (http://wiki.eclipse.org/Jetty/Howto/Port80) how to do this.\r\n * Use something for reverse proxy (i use nginx)\r\n\r\nBoth (for jetty):\r\n\r\n * Optimaze it (http://wiki.eclipse.org/Jetty/Howto/Garbage_Collection, http://wiki.eclipse.org/Jetty/Howto/High_Load)\r\n * Use resourceBase for context config and extract war in webapps\r\n\r\nContributing\r\n=================================\r\n \r\n* Check out the latest master to make sure the feature hasn't been implemented or the bug hasn't been fixed yet\r\n* Check out the issue tracker to make sure someone already hasn't requested it and/or contributed it\r\n* Fork the project\r\n* Start a feature/bugfix branch\r\n* Commit and push until you are happy with your contribution (make sensitive changes)\r\n* Discuss with me, if your changes are big\r\n* Please try not to mess with the build files, version, or history. If you want to have your own version, or is otherwise necessary, that is fine, but please isolate to its own commit so I can cherry-pick around it.\r\n\r\nLicense\r\n===========\r\n\r\nCopyright (c) 2011 Bardadym Denis. See LICENSE.txt for further details.","tagline":"Git Review Tool","google":"UA-30547395-1","note":"Don't delete this file! It's used internally to help with page regeneration."}